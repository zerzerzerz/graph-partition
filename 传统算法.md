# 图割传统算法介绍
- [Link](https://eecs.wsu.edu/~daehyun/teaching/2015_EE582/ppt/02-partitioning.pdf)

## 问题定义
- 将电路中的每个gate视为一个cell $c_i$，放在图中就是一个vertex或者node，每个cell都有自己的size，记为$s(c_i)$
- 电路中的连线视为edge $e_i$或者net，每条edge都有自己的权重weight，记为$w(e_i)$
- ![](fig/传统算法/cell.jpg)
  - 每个gate定义为一个cell
- ![](fig/传统算法/net.jpg)
  - 这里是hyperedge的情况，每个edge（net）可以连接多个pin

## Kernighan-Lin Algorithm
- 给定节点集，边集，和每条边的权重，每个节点的权重视为1
- 将节点集划分为两个集合AB，且满足AB两个集合大小相等，同时minimize cutsize作为objective
- Initial partition
  - 将节点集随机进行划分
- Gain computation
  - 对于每个cell，需要计算它的D-value
    - 下面计算cell a的D-value，并假设a属于part A
    - External cost $E_a := \sum_{v \in B}w(e_{av})$
    - Internal cost $I_a := \sum_{v \in A}w(e_{av})$
    - D-value of a $D_a := E_a - I_a$
  - 得到每个cell的D-value之后，就可以计算全部节点对之间的gain
    - Gain of cell pair $(a,b), g_{ab} := D_a + D_b - 2w(e_{ab})$
  - 之后从全部的gain中选取最大的，记为$g_i$，交换选中的节点对中两个节点各自所属的part，然后将这两个节点对锁定，不再参与之后的计算
  - 重新计算剩余未锁定的节点的D-value，重复上述过程，直到全部的cell都被锁定
  - 当全部节点都被锁定之后，计算$k = \mathrm{argmax}_{k}\sum_{i=1}^{k}g_i$，选取k作为这次的划分结果
- 将刚刚得到的划分结果作为下一次划分的initial partition，重复上述流程
- 无法处理hyperedge的情况
## Fiduccia-Mattheyses Algorithm
- 解决之前提到的hyperedge的情况
- 依然是将Hyper graph进行二分，但是引入了balance criterion，避免算法将全部的cell分类到同一个block中
- 补充新的定义
  - Cutstate of net
    - uncut
    - cut